"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

exports.requireParser = requireParser;
exports.mixinParser = mixinParser;
exports.nameParser = nameParser;
exports.propsParser = propsParser;
Object.defineProperty(exports, "__esModule", {
  value: true
});

var estraverse = _interopRequire(require("estraverse"));

var find = require("lodash").find;

var log = _interopRequire(require("./logger.js"));

function requireParser(ast) {
  if (!ast) {
    return ast;
  }

  var deps = [];
  estraverse.traverse(ast, {
    enter: function enter(node, parent) {
      if (node.type === "Identifier" && node.name === "require" && parent.type === "CallExpression") {
        deps.push(parent.arguments[0].value);
      }
    }
  });

  return deps;
}

function mixinParser(ast, sourceCode) {
  if (!ast) {
    return ast;
  }

  var mixins = [];
  estraverse.traverse(ast, {
    enter: function enter(node, parent) {
      if (node.type === "Identifier" && node.name === "mixins" && parent.type === "Property") {
        parent.value.elements.forEach(function (el) {
          mixins.push(sourceCode.slice(el.start, el.end));
        });

        this["break"]();
      }
    }
  });

  return mixins;
}

function nameParser(ast) {
  if (!ast) {
    return ast;
  }

  var name = "<<anonymous>>";
  estraverse.traverse(ast, {
    enter: function enter(node, parent) {
      if (node.type === "Identifier" && node.value === "displayName" && parent.type === "Property") {
        name = parent.value.value;

        this["break"]();
      } else if (node.type === "CallExpression" && node.callee.type === "MemberExpression" && node.callee.object.name === "React" && node.callee.property.name === "createClass" && parent.id) {
        name = parent.id.name;

        this["break"]();
      }
    }
  });

  return name;
}

function propsParser(ast, sourceCode) {
  if (!ast) {
    return ast;
  }

  var props = [];

  //Parse `propTypes`
  estraverse.traverse(ast, {
    enter: function enter(node, parent) {
      if (node.type === "Identifier" && node.name === "propTypes") {
        var propTypes = parent.value.properties;

        propTypes.forEach(function (item) {
          var propName = item.key.name;
          var propType = item.value;

          var obj = {};
          obj.name = propName;
          obj.type = sourceCode.slice(propType.start, propType.end).replace(/React\.PropTypes\./g, "").replace(/\bfunc\b/, "function");
          props.push(obj);
        });

        this["break"]();
      }
    }
  });

  //Parse `getDefaultProps`
  estraverse.traverse(ast, {
    enter: function enter(node, parent) {
      if (node.type === "Identifier" && node.name === "getDefaultProps") {
        var body = parent.value.body.body;
        var ret = find(body, { type: "ReturnStatement" });

        if (ret.argument.type !== "ObjectExpression") {
          log("Can't process function expression as return value of getDefaultProps yet!");
          return props;
        }

        ret.argument.properties.forEach(function (val) {
          var prop = val.key.name;
          var defaults = sourceCode.slice(val.value.start, val.value.end);

          var propInProps = find(props, { name: prop });
          if (propInProps) {
            propInProps.defaults = defaults;
          } else {
            props.push({
              name: prop,
              defaults: defaults
            });
          }
        });

        this["break"]();
      }
    }
  });

  return props;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wYXJzZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztRQUlnQixhQUFhLEdBQWIsYUFBYTtRQWtCYixXQUFXLEdBQVgsV0FBVztRQXFCWCxVQUFVLEdBQVYsVUFBVTtRQTJCVixXQUFXLEdBQVgsV0FBVzs7Ozs7SUF0RXBCLFVBQVUsMkJBQU0sWUFBWTs7SUFDM0IsSUFBSSxXQUFPLFFBQVEsRUFBbkIsSUFBSTs7SUFDTCxHQUFHLDJCQUFNLGFBQWE7O0FBRXRCLFNBQVMsYUFBYSxDQUFDLEdBQUcsRUFBRTtBQUNqQyxNQUFJLENBQUMsR0FBRyxFQUFFO0FBQ1IsV0FBTyxHQUFHLENBQUM7R0FDWjs7QUFFRCxNQUFJLElBQUksR0FBRyxFQUFFLENBQUM7QUFDZCxZQUFVLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRTtBQUN2QixTQUFLLEVBQUMsZUFBQyxJQUFJLEVBQUUsTUFBTSxFQUFFO0FBQ25CLFVBQUksSUFBSSxDQUFDLElBQUksS0FBSyxZQUFZLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxTQUFTLElBQUksTUFBTSxDQUFDLElBQUksS0FBSyxnQkFBZ0IsRUFBRTtBQUM3RixZQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7T0FDdEM7S0FDRjtHQUNGLENBQUMsQ0FBQzs7QUFFSCxTQUFPLElBQUksQ0FBQztDQUNiOztBQUdNLFNBQVMsV0FBVyxDQUFDLEdBQUcsRUFBRSxVQUFVLEVBQUU7QUFDM0MsTUFBSSxDQUFDLEdBQUcsRUFBRTtBQUNSLFdBQU8sR0FBRyxDQUFDO0dBQ1o7O0FBRUQsTUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDO0FBQ2hCLFlBQVUsQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFO0FBQ3ZCLFNBQUssRUFBQyxlQUFDLElBQUksRUFBRSxNQUFNLEVBQUU7QUFDbkIsVUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLFlBQVksSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLFFBQVEsSUFBSSxNQUFNLENBQUMsSUFBSSxLQUFLLFVBQVUsRUFBRTtBQUN0RixjQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsVUFBQyxFQUFFLEVBQUs7QUFDcEMsZ0JBQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQ2pELENBQUMsQ0FBQzs7QUFFSCxZQUFJLFNBQU0sRUFBRSxDQUFDO09BQ2Q7S0FDRjtHQUNGLENBQUMsQ0FBQzs7QUFFSCxTQUFPLE1BQU0sQ0FBQztDQUNmOztBQUVNLFNBQVMsVUFBVSxDQUFDLEdBQUcsRUFBRTtBQUM5QixNQUFJLENBQUMsR0FBRyxFQUFFO0FBQ1IsV0FBTyxHQUFHLENBQUM7R0FDWjs7QUFFRCxNQUFJLElBQUksR0FBRyxlQUFlLENBQUM7QUFDM0IsWUFBVSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUU7QUFDdkIsU0FBSyxFQUFDLGVBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRTtBQUNuQixVQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssWUFBWSxJQUFJLElBQUksQ0FBQyxLQUFLLEtBQUssYUFBYSxJQUFJLE1BQU0sQ0FBQyxJQUFJLEtBQUssVUFBVSxFQUFFO0FBQzVGLFlBQUksR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQzs7QUFFMUIsWUFBSSxTQUFNLEVBQUUsQ0FBQztPQUNkLE1BQ0ksSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLGdCQUFnQixJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxLQUFLLGtCQUFrQixJQUN6RSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEtBQUssT0FBTyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksS0FBSyxhQUFhLElBQ2xGLE1BQU0sQ0FBQyxFQUFFLEVBQ2Q7QUFDRixZQUFJLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUM7O0FBRXRCLFlBQUksU0FBTSxFQUFFLENBQUM7T0FDZDtLQUNGO0dBQ0YsQ0FBQyxDQUFDOztBQUVILFNBQU8sSUFBSSxDQUFDO0NBQ2I7O0FBRU0sU0FBUyxXQUFXLENBQUMsR0FBRyxFQUFFLFVBQVUsRUFBRTtBQUMzQyxNQUFJLENBQUMsR0FBRyxFQUFFO0FBQ1IsV0FBTyxHQUFHLENBQUM7R0FDWjs7QUFFRCxNQUFJLEtBQUssR0FBRyxFQUFFLENBQUM7OztBQUdmLFlBQVUsQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFO0FBQ3ZCLFNBQUssRUFBQyxlQUFDLElBQUksRUFBRSxNQUFNLEVBQUU7QUFDbkIsVUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLFlBQVksSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLFdBQVcsRUFBRTtBQUMzRCxZQUFJLFNBQVMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQzs7QUFFeEMsaUJBQVMsQ0FBQyxPQUFPLENBQUMsVUFBQyxJQUFJLEVBQUs7QUFDMUIsY0FBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUM7QUFDN0IsY0FBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQzs7QUFFMUIsY0FBSSxHQUFHLEdBQUcsRUFBRSxDQUFDO0FBQ2IsYUFBRyxDQUFDLElBQUksR0FBRyxRQUFRLENBQUM7QUFDcEIsYUFBRyxDQUFDLElBQUksR0FBRyxVQUFVLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxxQkFBcUIsRUFBRSxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQzdILGVBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDakIsQ0FBQyxDQUFDOztBQUVILFlBQUksU0FBTSxFQUFFLENBQUM7T0FDZDtLQUNGO0dBQ0YsQ0FBQyxDQUFDOzs7QUFHSCxZQUFVLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRTtBQUN2QixTQUFLLEVBQUMsZUFBQyxJQUFJLEVBQUUsTUFBTSxFQUFFO0FBQ25CLFVBQUksSUFBSSxDQUFDLElBQUksS0FBSyxZQUFZLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxpQkFBaUIsRUFBRTtBQUNqRSxZQUFJLElBQUksR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDbEMsWUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksRUFBRSxFQUFDLElBQUksRUFBRSxpQkFBaUIsRUFBQyxDQUFDLENBQUM7O0FBRWhELFlBQUksR0FBRyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEtBQUssa0JBQWtCLEVBQUU7QUFDNUMsYUFBRyxDQUFDLDJFQUE0RSxDQUFDLENBQUM7QUFDbEYsaUJBQU8sS0FBSyxDQUFDO1NBQ2Q7O0FBRUQsV0FBRyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLFVBQUMsR0FBRyxFQUFLO0FBQ3ZDLGNBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDO0FBQ3hCLGNBQUksUUFBUSxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQzs7QUFFaEUsY0FBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRSxFQUFDLElBQUksRUFBRSxJQUFJLEVBQUMsQ0FBQyxDQUFDO0FBQzVDLGNBQUksV0FBVyxFQUFFO0FBQ2YsdUJBQVcsQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1dBQ2pDLE1BQ0k7QUFDSCxpQkFBSyxDQUFDLElBQUksQ0FBQztBQUNULGtCQUFJLEVBQUUsSUFBSTtBQUNWLHNCQUFRLEVBQUUsUUFBUTthQUNuQixDQUFDLENBQUM7V0FDSjtTQUNGLENBQUMsQ0FBQzs7QUFFSCxZQUFJLFNBQU0sRUFBRSxDQUFDO09BQ2Q7S0FDRjtHQUNGLENBQUMsQ0FBQzs7QUFFSCxTQUFPLEtBQUssQ0FBQztDQUNkIiwiZmlsZSI6InNyYy9wYXJzZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXN0cmF2ZXJzZSBmcm9tICdlc3RyYXZlcnNlJztcbmltcG9ydCB7ZmluZH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBsb2cgZnJvbSAnLi9sb2dnZXIuanMnO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZVBhcnNlcihhc3QpIHtcbiAgaWYgKCFhc3QpIHtcbiAgICByZXR1cm4gYXN0O1xuICB9XG5cbiAgdmFyIGRlcHMgPSBbXTtcbiAgZXN0cmF2ZXJzZS50cmF2ZXJzZShhc3QsIHtcbiAgICBlbnRlciAobm9kZSwgcGFyZW50KSB7XG4gICAgICBpZiAobm9kZS50eXBlID09PSAnSWRlbnRpZmllcicgJiYgbm9kZS5uYW1lID09PSAncmVxdWlyZScgJiYgcGFyZW50LnR5cGUgPT09ICdDYWxsRXhwcmVzc2lvbicpIHtcbiAgICAgICAgZGVwcy5wdXNoKHBhcmVudC5hcmd1bWVudHNbMF0udmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGRlcHM7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIG1peGluUGFyc2VyKGFzdCwgc291cmNlQ29kZSkge1xuICBpZiAoIWFzdCkge1xuICAgIHJldHVybiBhc3Q7XG4gIH1cblxuICB2YXIgbWl4aW5zID0gW107XG4gIGVzdHJhdmVyc2UudHJhdmVyc2UoYXN0LCB7XG4gICAgZW50ZXIgKG5vZGUsIHBhcmVudCkge1xuICAgICAgaWYgKG5vZGUudHlwZSA9PT0gJ0lkZW50aWZpZXInICYmIG5vZGUubmFtZSA9PT0gJ21peGlucycgJiYgcGFyZW50LnR5cGUgPT09ICdQcm9wZXJ0eScpIHtcbiAgICAgICAgcGFyZW50LnZhbHVlLmVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgICAgbWl4aW5zLnB1c2goc291cmNlQ29kZS5zbGljZShlbC5zdGFydCwgZWwuZW5kKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYnJlYWsoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBtaXhpbnM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBuYW1lUGFyc2VyKGFzdCkge1xuICBpZiAoIWFzdCkge1xuICAgIHJldHVybiBhc3Q7XG4gIH1cblxuICB2YXIgbmFtZSA9ICc8PGFub255bW91cz4+JztcbiAgZXN0cmF2ZXJzZS50cmF2ZXJzZShhc3QsIHtcbiAgICBlbnRlciAobm9kZSwgcGFyZW50KSB7XG4gICAgICBpZiAobm9kZS50eXBlID09PSAnSWRlbnRpZmllcicgJiYgbm9kZS52YWx1ZSA9PT0gJ2Rpc3BsYXlOYW1lJyAmJiBwYXJlbnQudHlwZSA9PT0gJ1Byb3BlcnR5Jykge1xuICAgICAgICBuYW1lID0gcGFyZW50LnZhbHVlLnZhbHVlO1xuXG4gICAgICAgIHRoaXMuYnJlYWsoKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKG5vZGUudHlwZSA9PT0gJ0NhbGxFeHByZXNzaW9uJyAmJiBub2RlLmNhbGxlZS50eXBlID09PSAnTWVtYmVyRXhwcmVzc2lvbicgJiZcbiAgICAgICAgICAgICAgIG5vZGUuY2FsbGVlLm9iamVjdC5uYW1lID09PSAnUmVhY3QnICYmIG5vZGUuY2FsbGVlLnByb3BlcnR5Lm5hbWUgPT09ICdjcmVhdGVDbGFzcycgJiZcbiAgICAgICAgICAgICAgIHBhcmVudC5pZFxuICAgICAgICApIHtcbiAgICAgICAgbmFtZSA9IHBhcmVudC5pZC5uYW1lO1xuXG4gICAgICAgIHRoaXMuYnJlYWsoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBuYW1lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJvcHNQYXJzZXIoYXN0LCBzb3VyY2VDb2RlKSB7XG4gIGlmICghYXN0KSB7XG4gICAgcmV0dXJuIGFzdDtcbiAgfVxuXG4gIHZhciBwcm9wcyA9IFtdO1xuXG4gIC8vUGFyc2UgYHByb3BUeXBlc2BcbiAgZXN0cmF2ZXJzZS50cmF2ZXJzZShhc3QsIHtcbiAgICBlbnRlciAobm9kZSwgcGFyZW50KSB7XG4gICAgICBpZiAobm9kZS50eXBlID09PSAnSWRlbnRpZmllcicgJiYgbm9kZS5uYW1lID09PSAncHJvcFR5cGVzJykge1xuICAgICAgICB2YXIgcHJvcFR5cGVzID0gcGFyZW50LnZhbHVlLnByb3BlcnRpZXM7XG5cbiAgICAgICAgcHJvcFR5cGVzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICB2YXIgcHJvcE5hbWUgPSBpdGVtLmtleS5uYW1lO1xuICAgICAgICAgIHZhciBwcm9wVHlwZSA9IGl0ZW0udmFsdWU7XG5cbiAgICAgICAgICB2YXIgb2JqID0ge307XG4gICAgICAgICAgb2JqLm5hbWUgPSBwcm9wTmFtZTtcbiAgICAgICAgICBvYmoudHlwZSA9IHNvdXJjZUNvZGUuc2xpY2UocHJvcFR5cGUuc3RhcnQsIHByb3BUeXBlLmVuZCkucmVwbGFjZSgvUmVhY3RcXC5Qcm9wVHlwZXNcXC4vZywgJycpLnJlcGxhY2UoL1xcYmZ1bmNcXGIvLCAnZnVuY3Rpb24nKTtcbiAgICAgICAgICBwcm9wcy5wdXNoKG9iaik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYnJlYWsoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8vUGFyc2UgYGdldERlZmF1bHRQcm9wc2BcbiAgZXN0cmF2ZXJzZS50cmF2ZXJzZShhc3QsIHtcbiAgICBlbnRlciAobm9kZSwgcGFyZW50KSB7XG4gICAgICBpZiAobm9kZS50eXBlID09PSAnSWRlbnRpZmllcicgJiYgbm9kZS5uYW1lID09PSAnZ2V0RGVmYXVsdFByb3BzJykge1xuICAgICAgICBsZXQgYm9keSA9IHBhcmVudC52YWx1ZS5ib2R5LmJvZHk7XG4gICAgICAgIGxldCByZXQgPSBmaW5kKGJvZHksIHt0eXBlOiAnUmV0dXJuU3RhdGVtZW50J30pO1xuXG4gICAgICAgIGlmIChyZXQuYXJndW1lbnQudHlwZSAhPT0gJ09iamVjdEV4cHJlc3Npb24nKSB7XG4gICAgICAgICAgbG9nKCdDYW5cXCd0IHByb2Nlc3MgZnVuY3Rpb24gZXhwcmVzc2lvbiBhcyByZXR1cm4gdmFsdWUgb2YgZ2V0RGVmYXVsdFByb3BzIHlldCEnKTtcbiAgICAgICAgICByZXR1cm4gcHJvcHM7XG4gICAgICAgIH1cblxuICAgICAgICByZXQuYXJndW1lbnQucHJvcGVydGllcy5mb3JFYWNoKCh2YWwpID0+IHtcbiAgICAgICAgICBsZXQgcHJvcCA9IHZhbC5rZXkubmFtZTtcbiAgICAgICAgICBsZXQgZGVmYXVsdHMgPSBzb3VyY2VDb2RlLnNsaWNlKHZhbC52YWx1ZS5zdGFydCwgdmFsLnZhbHVlLmVuZCk7XG5cbiAgICAgICAgICBsZXQgcHJvcEluUHJvcHMgPSBmaW5kKHByb3BzLCB7bmFtZTogcHJvcH0pO1xuICAgICAgICAgIGlmIChwcm9wSW5Qcm9wcykge1xuICAgICAgICAgICAgcHJvcEluUHJvcHMuZGVmYXVsdHMgPSBkZWZhdWx0cztcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwcm9wcy5wdXNoKHtcbiAgICAgICAgICAgICAgbmFtZTogcHJvcCxcbiAgICAgICAgICAgICAgZGVmYXVsdHM6IGRlZmF1bHRzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYnJlYWsoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBwcm9wcztcbn1cbiJdfQ==